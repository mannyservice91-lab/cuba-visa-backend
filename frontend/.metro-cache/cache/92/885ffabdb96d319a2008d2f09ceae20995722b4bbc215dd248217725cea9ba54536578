{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // Helper to clear storage on web\n  const clearWebStorage = key => {\n    if (Platform.default.OS === 'web' && false) {\n      try {\n        localStorage.removeItem(key);\n        sessionStorage.removeItem(key);\n      } catch (e) {\n        console.error('Error clearing web storage:', e);\n      }\n    }\n  };\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [admin, setAdmin] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredData();\n    }, []);\n    const loadStoredData = async () => {\n      try {\n        const [userData, adminData] = await Promise.all([AsyncStorage.default.getItem('user'), AsyncStorage.default.getItem('admin')]);\n        if (userData) {\n          setUser(JSON.parse(userData));\n        }\n        if (adminData) {\n          setAdmin(JSON.parse(adminData));\n        }\n      } catch (error) {\n        console.error('Error loading stored data:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async userData => {\n      setUser(userData);\n      await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n    };\n    const logout = async () => {\n      setUser(null);\n      await AsyncStorage.default.removeItem('user');\n      clearWebStorage('user');\n    };\n    const updateUser = async userData => {\n      if (user) {\n        const updatedUser = {\n          ...user,\n          ...userData\n        };\n        setUser(updatedUser);\n        await AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n      }\n    };\n    const adminLogin = async adminData => {\n      setAdmin(adminData);\n      await AsyncStorage.default.setItem('admin', JSON.stringify(adminData));\n    };\n    const adminLogout = async () => {\n      console.log('Admin logout called');\n      setAdmin(null);\n      await AsyncStorage.default.removeItem('admin');\n      clearWebStorage('admin');\n      // Force clear all AsyncStorage keys related to admin\n      if (Platform.default.OS === 'web' && false) {\n        Object.keys(localStorage).forEach(key => {\n          if (key.includes('admin')) {\n            localStorage.removeItem(key);\n          }\n        });\n      }\n      console.log('Admin logout complete');\n    };\n    const isAdmin = admin !== null && admin.access_token !== undefined;\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        admin,\n        isLoading,\n        login,\n        logout,\n        updateUser,\n        adminLogin,\n        adminLogout,\n        isAdmin\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":123,"map":[[13,2,49,0,"exports"],[13,9,49,0],[13,10,49,0,"AuthProvider"],[13,22,49,0],[13,25,49,0,"AuthProvider"],[13,37,49,0],[14,2,137,0,"exports"],[14,9,137,0],[14,10,137,0,"useAuth"],[14,17,137,0],[14,20,137,0,"useAuth"],[14,27,137,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,2,69],[18,6,2,69,"_reactNativeWebDistExportsPlatform"],[18,40,2,69],[18,43,2,69,"require"],[18,50,2,69],[18,51,2,69,"_dependencyMap"],[18,65,2,69],[19,2,2,69],[19,6,2,69,"Platform"],[19,14,2,69],[19,17,2,69,"_interopDefault"],[19,32,2,69],[19,33,2,69,"_reactNativeWebDistExportsPlatform"],[19,67,2,69],[20,2,2,69],[20,6,2,69,"_reactJsxDevRuntime"],[20,25,2,69],[20,28,2,69,"require"],[20,35,2,69],[20,36,2,69,"_dependencyMap"],[20,50,2,69],[21,2,35,0],[21,8,35,6,"AuthContext"],[21,19,35,17],[21,35,35,20],[21,39,35,20,"createContext"],[21,45,35,33],[21,46,35,33,"createContext"],[21,59,35,33],[21,61,35,63,"undefined"],[21,70,35,72],[21,71,35,73],[23,2,37,0],[24,2,38,0],[24,8,38,6,"clearWebStorage"],[24,23,38,21],[24,26,38,25,"key"],[24,29,38,36],[24,33,38,41],[25,4,39,2],[25,8,39,6,"Platform"],[25,16,39,14],[25,17,39,14,"default"],[25,24,39,14],[25,25,39,15,"OS"],[25,27,39,17],[25,32,39,22],[25,37,39,27],[25,46,39,60],[25,48,39,62],[26,6,40,4],[26,10,40,8],[27,8,41,6,"localStorage"],[27,20,41,18],[27,21,41,19,"removeItem"],[27,31,41,29],[27,32,41,30,"key"],[27,35,41,33],[27,36,41,34],[28,8,42,6,"sessionStorage"],[28,22,42,20],[28,23,42,21,"removeItem"],[28,33,42,31],[28,34,42,32,"key"],[28,37,42,35],[28,38,42,36],[29,6,43,4],[29,7,43,5],[29,8,43,6],[29,15,43,13,"e"],[29,16,43,14],[29,18,43,16],[30,8,44,6,"console"],[30,15,44,13],[30,16,44,14,"error"],[30,21,44,19],[30,22,44,20],[30,51,44,49],[30,53,44,51,"e"],[30,54,44,52],[30,55,44,53],[31,6,45,4],[32,4,46,2],[33,2,47,0],[33,3,47,1],[34,2,49,7],[34,11,49,16,"AuthProvider"],[34,23,49,28,"AuthProvider"],[34,24,49,29],[35,4,49,31,"children"],[36,2,49,65],[36,3,49,66],[36,5,49,68],[37,4,50,2],[37,10,50,8],[37,11,50,9,"user"],[37,15,50,13],[37,17,50,15,"setUser"],[37,24,50,22],[37,25,50,23],[37,28,50,26],[37,32,50,26,"useState"],[37,38,50,34],[37,39,50,34,"useState"],[37,47,50,34],[37,49,50,48],[37,53,50,52],[37,54,50,53],[38,4,51,2],[38,10,51,8],[38,11,51,9,"admin"],[38,16,51,14],[38,18,51,16,"setAdmin"],[38,26,51,24],[38,27,51,25],[38,30,51,28],[38,34,51,28,"useState"],[38,40,51,36],[38,41,51,36,"useState"],[38,49,51,36],[38,51,51,51],[38,55,51,55],[38,56,51,56],[39,4,52,2],[39,10,52,8],[39,11,52,9,"isLoading"],[39,20,52,18],[39,22,52,20,"setIsLoading"],[39,34,52,32],[39,35,52,33],[39,38,52,36],[39,42,52,36,"useState"],[39,48,52,44],[39,49,52,44,"useState"],[39,57,52,44],[39,59,52,45],[39,63,52,49],[39,64,52,50],[40,4,54,2],[40,8,54,2,"useEffect"],[40,14,54,11],[40,15,54,11,"useEffect"],[40,24,54,11],[40,26,54,12],[40,32,54,18],[41,6,55,4,"loadStoredData"],[41,20,55,18],[41,21,55,19],[41,22,55,20],[42,4,56,2],[42,5,56,3],[42,7,56,5],[42,9,56,7],[42,10,56,8],[43,4,58,2],[43,10,58,8,"loadStoredData"],[43,24,58,22],[43,27,58,25],[43,33,58,25,"loadStoredData"],[43,34,58,25],[43,39,58,37],[44,6,59,4],[44,10,59,8],[45,8,60,6],[45,14,60,12],[45,15,60,13,"userData"],[45,23,60,21],[45,25,60,23,"adminData"],[45,34,60,32],[45,35,60,33],[45,38,60,36],[45,44,60,42,"Promise"],[45,51,60,49],[45,52,60,50,"all"],[45,55,60,53],[45,56,60,54],[45,57,61,8,"AsyncStorage"],[45,69,61,20],[45,70,61,20,"default"],[45,77,61,20],[45,78,61,21,"getItem"],[45,85,61,28],[45,86,61,29],[45,92,61,35],[45,93,61,36],[45,95,62,8,"AsyncStorage"],[45,107,62,20],[45,108,62,20,"default"],[45,115,62,20],[45,116,62,21,"getItem"],[45,123,62,28],[45,124,62,29],[45,131,62,36],[45,132,62,37],[45,133,63,7],[45,134,63,8],[46,8,65,6],[46,12,65,10,"userData"],[46,20,65,18],[46,22,65,20],[47,10,66,8,"setUser"],[47,17,66,15],[47,18,66,16,"JSON"],[47,22,66,20],[47,23,66,21,"parse"],[47,28,66,26],[47,29,66,27,"userData"],[47,37,66,35],[47,38,66,36],[47,39,66,37],[48,8,67,6],[49,8,68,6],[49,12,68,10,"adminData"],[49,21,68,19],[49,23,68,21],[50,10,69,8,"setAdmin"],[50,18,69,16],[50,19,69,17,"JSON"],[50,23,69,21],[50,24,69,22,"parse"],[50,29,69,27],[50,30,69,28,"adminData"],[50,39,69,37],[50,40,69,38],[50,41,69,39],[51,8,70,6],[52,6,71,4],[52,7,71,5],[52,8,71,6],[52,15,71,13,"error"],[52,20,71,18],[52,22,71,20],[53,8,72,6,"console"],[53,15,72,13],[53,16,72,14,"error"],[53,21,72,19],[53,22,72,20],[53,50,72,48],[53,52,72,50,"error"],[53,57,72,55],[53,58,72,56],[54,6,73,4],[54,7,73,5],[54,16,73,14],[55,8,74,6,"setIsLoading"],[55,20,74,18],[55,21,74,19],[55,26,74,24],[55,27,74,25],[56,6,75,4],[57,4,76,2],[57,5,76,3],[58,4,78,2],[58,10,78,8,"login"],[58,15,78,13],[58,18,78,16],[58,24,78,23,"userData"],[58,32,78,37],[58,36,78,42],[59,6,79,4,"setUser"],[59,13,79,11],[59,14,79,12,"userData"],[59,22,79,20],[59,23,79,21],[60,6,80,4],[60,12,80,10,"AsyncStorage"],[60,24,80,22],[60,25,80,22,"default"],[60,32,80,22],[60,33,80,23,"setItem"],[60,40,80,30],[60,41,80,31],[60,47,80,37],[60,49,80,39,"JSON"],[60,53,80,43],[60,54,80,44,"stringify"],[60,63,80,53],[60,64,80,54,"userData"],[60,72,80,62],[60,73,80,63],[60,74,80,64],[61,4,81,2],[61,5,81,3],[62,4,83,2],[62,10,83,8,"logout"],[62,16,83,14],[62,19,83,17],[62,25,83,17,"logout"],[62,26,83,17],[62,31,83,29],[63,6,84,4,"setUser"],[63,13,84,11],[63,14,84,12],[63,18,84,16],[63,19,84,17],[64,6,85,4],[64,12,85,10,"AsyncStorage"],[64,24,85,22],[64,25,85,22,"default"],[64,32,85,22],[64,33,85,23,"removeItem"],[64,43,85,33],[64,44,85,34],[64,50,85,40],[64,51,85,41],[65,6,86,4,"clearWebStorage"],[65,21,86,19],[65,22,86,20],[65,28,86,26],[65,29,86,27],[66,4,87,2],[66,5,87,3],[67,4,89,2],[67,10,89,8,"updateUser"],[67,20,89,18],[67,23,89,21],[67,29,89,28,"userData"],[67,37,89,51],[67,41,89,56],[68,6,90,4],[68,10,90,8,"user"],[68,14,90,12],[68,16,90,14],[69,8,91,6],[69,14,91,12,"updatedUser"],[69,25,91,23],[69,28,91,26],[70,10,91,28],[70,13,91,31,"user"],[70,17,91,35],[71,10,91,37],[71,13,91,40,"userData"],[72,8,91,49],[72,9,91,50],[73,8,92,6,"setUser"],[73,15,92,13],[73,16,92,14,"updatedUser"],[73,27,92,25],[73,28,92,26],[74,8,93,6],[74,14,93,12,"AsyncStorage"],[74,26,93,24],[74,27,93,24,"default"],[74,34,93,24],[74,35,93,25,"setItem"],[74,42,93,32],[74,43,93,33],[74,49,93,39],[74,51,93,41,"JSON"],[74,55,93,45],[74,56,93,46,"stringify"],[74,65,93,55],[74,66,93,56,"updatedUser"],[74,77,93,67],[74,78,93,68],[74,79,93,69],[75,6,94,4],[76,4,95,2],[76,5,95,3],[77,4,97,2],[77,10,97,8,"adminLogin"],[77,20,97,18],[77,23,97,21],[77,29,97,28,"adminData"],[77,38,97,44],[77,42,97,49],[78,6,98,4,"setAdmin"],[78,14,98,12],[78,15,98,13,"adminData"],[78,24,98,22],[78,25,98,23],[79,6,99,4],[79,12,99,10,"AsyncStorage"],[79,24,99,22],[79,25,99,22,"default"],[79,32,99,22],[79,33,99,23,"setItem"],[79,40,99,30],[79,41,99,31],[79,48,99,38],[79,50,99,40,"JSON"],[79,54,99,44],[79,55,99,45,"stringify"],[79,64,99,54],[79,65,99,55,"adminData"],[79,74,99,64],[79,75,99,65],[79,76,99,66],[80,4,100,2],[80,5,100,3],[81,4,102,2],[81,10,102,8,"adminLogout"],[81,21,102,19],[81,24,102,22],[81,30,102,22,"adminLogout"],[81,31,102,22],[81,36,102,34],[82,6,103,4,"console"],[82,13,103,11],[82,14,103,12,"log"],[82,17,103,15],[82,18,103,16],[82,39,103,37],[82,40,103,38],[83,6,104,4,"setAdmin"],[83,14,104,12],[83,15,104,13],[83,19,104,17],[83,20,104,18],[84,6,105,4],[84,12,105,10,"AsyncStorage"],[84,24,105,22],[84,25,105,22,"default"],[84,32,105,22],[84,33,105,23,"removeItem"],[84,43,105,33],[84,44,105,34],[84,51,105,41],[84,52,105,42],[85,6,106,4,"clearWebStorage"],[85,21,106,19],[85,22,106,20],[85,29,106,27],[85,30,106,28],[86,6,107,4],[87,6,108,4],[87,10,108,8,"Platform"],[87,18,108,16],[87,19,108,16,"default"],[87,26,108,16],[87,27,108,17,"OS"],[87,29,108,19],[87,34,108,24],[87,39,108,29],[87,48,108,62],[87,50,108,64],[88,8,109,6,"Object"],[88,14,109,12],[88,15,109,13,"keys"],[88,19,109,17],[88,20,109,18,"localStorage"],[88,32,109,30],[88,33,109,31],[88,34,109,32,"forEach"],[88,41,109,39],[88,42,109,40,"key"],[88,45,109,43],[88,49,109,47],[89,10,110,8],[89,14,110,12,"key"],[89,17,110,15],[89,18,110,16,"includes"],[89,26,110,24],[89,27,110,25],[89,34,110,32],[89,35,110,33],[89,37,110,35],[90,12,111,10,"localStorage"],[90,24,111,22],[90,25,111,23,"removeItem"],[90,35,111,33],[90,36,111,34,"key"],[90,39,111,37],[90,40,111,38],[91,10,112,8],[92,8,113,6],[92,9,113,7],[92,10,113,8],[93,6,114,4],[94,6,115,4,"console"],[94,13,115,11],[94,14,115,12,"log"],[94,17,115,15],[94,18,115,16],[94,41,115,39],[94,42,115,40],[95,4,116,2],[95,5,116,3],[96,4,118,2],[96,10,118,8,"isAdmin"],[96,17,118,15],[96,20,118,18,"admin"],[96,25,118,23],[96,30,118,28],[96,34,118,32],[96,38,118,36,"admin"],[96,43,118,41],[96,44,118,42,"access_token"],[96,56,118,54],[96,61,118,59,"undefined"],[96,70,118,68],[97,4,120,2],[97,24,121,4],[97,28,121,4,"_reactJsxDevRuntime"],[97,47,121,4],[97,48,121,4,"jsxDEV"],[97,54,121,4],[97,56,121,5,"AuthContext"],[97,67,121,16],[97,68,121,17,"Provider"],[97,76,121,25],[98,6,121,26,"value"],[98,11,121,31],[98,13,121,33],[99,8,122,6,"user"],[99,12,122,10],[100,8,123,6,"admin"],[100,13,123,11],[101,8,124,6,"isLoading"],[101,17,124,15],[102,8,125,6,"login"],[102,13,125,11],[103,8,126,6,"logout"],[103,14,126,12],[104,8,127,6,"updateUser"],[104,18,127,16],[105,8,128,6,"adminLogin"],[105,18,128,16],[106,8,129,6,"adminLogout"],[106,19,129,17],[107,8,130,6,"isAdmin"],[108,6,131,4],[108,7,131,6],[109,6,131,6,"children"],[109,14,131,6],[109,16,132,7,"children"],[110,4,132,15],[111,6,132,15,"fileName"],[111,14,132,15],[111,16,132,15,"_jsxFileName"],[111,28,132,15],[112,6,132,15,"lineNumber"],[112,16,132,15],[113,6,132,15,"columnNumber"],[113,18,132,15],[114,4,132,15],[114,11,133,26],[114,12,133,27],[115,2,135,0],[116,2,137,7],[116,11,137,16,"useAuth"],[116,18,137,23,"useAuth"],[116,19,137,23],[116,21,137,26],[117,4,138,2],[117,10,138,8,"context"],[117,17,138,15],[117,20,138,18],[117,24,138,18,"useContext"],[117,30,138,28],[117,31,138,28,"useContext"],[117,41,138,28],[117,43,138,29,"AuthContext"],[117,54,138,40],[117,55,138,41],[118,4,139,2],[118,8,139,6,"context"],[118,15,139,13],[118,20,139,18,"undefined"],[118,29,139,27],[118,31,139,29],[119,6,140,4],[119,12,140,10],[119,16,140,14,"Error"],[119,21,140,19],[119,22,140,20],[119,67,140,65],[119,68,140,66],[120,4,141,2],[121,4,142,2],[121,11,142,9,"context"],[121,18,142,16],[122,2,143,0],[123,0,143,1],[123,3]],"functionMap":{"names":["<global>","clearWebStorage","AuthProvider","useEffect$argument_0","loadStoredData","login","logout","updateUser","adminLogin","adminLogout","Object.keys.forEach$argument_0","useAuth"],"mappings":"AAA;wBCqC;CDS;OEE;YCK;GDE;yBEE;GFkB;gBGE;GHG;iBIE;GJI;qBKE;GLM;qBME;GNG;sBOE;wCCO;ODI;GPG;CFmB;OWE;CXM"},"hasCjsExports":false},"type":"js/module"}]}