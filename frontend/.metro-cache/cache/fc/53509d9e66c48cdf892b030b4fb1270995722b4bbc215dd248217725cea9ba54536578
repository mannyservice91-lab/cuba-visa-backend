{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // Helper to clear storage on web\n  const clearWebStorage = key => {\n    if (Platform.default.OS === 'web' && typeof window !== 'undefined') {\n      try {\n        localStorage.removeItem(key);\n        sessionStorage.removeItem(key);\n      } catch (e) {\n        console.error('Error clearing web storage:', e);\n      }\n    }\n  };\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [admin, setAdmin] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredData();\n    }, []);\n    const loadStoredData = async () => {\n      try {\n        const [userData, adminData] = await Promise.all([AsyncStorage.default.getItem('user'), AsyncStorage.default.getItem('admin')]);\n        if (userData) {\n          setUser(JSON.parse(userData));\n        }\n        if (adminData) {\n          setAdmin(JSON.parse(adminData));\n        }\n      } catch (error) {\n        console.error('Error loading stored data:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async userData => {\n      setUser(userData);\n      await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n    };\n    const logout = async () => {\n      setUser(null);\n      await AsyncStorage.default.removeItem('user');\n      clearWebStorage('user');\n    };\n    const updateUser = async userData => {\n      if (user) {\n        const updatedUser = Object.assign({}, user, userData);\n        setUser(updatedUser);\n        await AsyncStorage.default.setItem('user', JSON.stringify(updatedUser));\n      }\n    };\n    const adminLogin = async adminData => {\n      setAdmin(adminData);\n      await AsyncStorage.default.setItem('admin', JSON.stringify(adminData));\n    };\n    const adminLogout = async () => {\n      console.log('Admin logout called');\n      setAdmin(null);\n      await AsyncStorage.default.removeItem('admin');\n      clearWebStorage('admin');\n      // Force clear all AsyncStorage keys related to admin\n      if (Platform.default.OS === 'web' && typeof window !== 'undefined') {\n        Object.keys(localStorage).forEach(key => {\n          if (key.includes('admin')) {\n            localStorage.removeItem(key);\n          }\n        });\n      }\n      console.log('Admin logout complete');\n    };\n    const isAdmin = admin !== null && admin.access_token !== undefined;\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        admin,\n        isLoading,\n        login,\n        logout,\n        updateUser,\n        adminLogin,\n        adminLogout,\n        isAdmin\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"x6fBvUpbMIU5k9+LCy3VG+GuquU=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":129,"map":[[15,2,49,0,"exports"],[15,9,49,0],[15,10,49,0,"AuthProvider"],[15,22,49,0],[15,25,49,0,"AuthProvider"],[15,37,49,0],[16,2,137,0,"exports"],[16,9,137,0],[16,10,137,0,"useAuth"],[16,17,137,0],[16,20,137,0,"useAuth"],[16,27,137,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,2,69],[20,6,2,69,"_reactNativeWebDistExportsPlatform"],[20,40,2,69],[20,43,2,69,"require"],[20,50,2,69],[20,51,2,69,"_dependencyMap"],[20,65,2,69],[21,2,2,69],[21,6,2,69,"Platform"],[21,14,2,69],[21,17,2,69,"_interopDefault"],[21,32,2,69],[21,33,2,69,"_reactNativeWebDistExportsPlatform"],[21,67,2,69],[22,2,2,69],[22,6,2,69,"_reactJsxDevRuntime"],[22,25,2,69],[22,28,2,69,"require"],[22,35,2,69],[22,36,2,69,"_dependencyMap"],[22,50,2,69],[23,2,35,0],[23,8,35,6,"AuthContext"],[23,19,35,17],[23,35,35,20],[23,39,35,20,"createContext"],[23,45,35,33],[23,46,35,33,"createContext"],[23,59,35,33],[23,61,35,63,"undefined"],[23,70,35,72],[23,71,35,73],[25,2,37,0],[26,2,38,0],[26,8,38,6,"clearWebStorage"],[26,23,38,21],[26,26,38,25,"key"],[26,29,38,36],[26,33,38,41],[27,4,39,2],[27,8,39,6,"Platform"],[27,16,39,14],[27,17,39,14,"default"],[27,24,39,14],[27,25,39,15,"OS"],[27,27,39,17],[27,32,39,22],[27,37,39,27],[27,41,39,31],[27,48,39,38,"window"],[27,54,39,44],[27,59,39,49],[27,70,39,60],[27,72,39,62],[28,6,40,4],[28,10,40,8],[29,8,41,6,"localStorage"],[29,20,41,18],[29,21,41,19,"removeItem"],[29,31,41,29],[29,32,41,30,"key"],[29,35,41,33],[29,36,41,34],[30,8,42,6,"sessionStorage"],[30,22,42,20],[30,23,42,21,"removeItem"],[30,33,42,31],[30,34,42,32,"key"],[30,37,42,35],[30,38,42,36],[31,6,43,4],[31,7,43,5],[31,8,43,6],[31,15,43,13,"e"],[31,16,43,14],[31,18,43,16],[32,8,44,6,"console"],[32,15,44,13],[32,16,44,14,"error"],[32,21,44,19],[32,22,44,20],[32,51,44,49],[32,53,44,51,"e"],[32,54,44,52],[32,55,44,53],[33,6,45,4],[34,4,46,2],[35,2,47,0],[35,3,47,1],[36,2,49,7],[36,11,49,16,"AuthProvider"],[36,23,49,28,"AuthProvider"],[36,24,49,29],[37,4,49,31,"children"],[38,2,49,65],[38,3,49,66],[38,5,49,68],[39,4,49,68,"_s"],[39,6,49,68],[40,4,50,2],[40,10,50,8],[40,11,50,9,"user"],[40,15,50,13],[40,17,50,15,"setUser"],[40,24,50,22],[40,25,50,23],[40,28,50,26],[40,32,50,26,"useState"],[40,38,50,34],[40,39,50,34,"useState"],[40,47,50,34],[40,49,50,48],[40,53,50,52],[40,54,50,53],[41,4,51,2],[41,10,51,8],[41,11,51,9,"admin"],[41,16,51,14],[41,18,51,16,"setAdmin"],[41,26,51,24],[41,27,51,25],[41,30,51,28],[41,34,51,28,"useState"],[41,40,51,36],[41,41,51,36,"useState"],[41,49,51,36],[41,51,51,51],[41,55,51,55],[41,56,51,56],[42,4,52,2],[42,10,52,8],[42,11,52,9,"isLoading"],[42,20,52,18],[42,22,52,20,"setIsLoading"],[42,34,52,32],[42,35,52,33],[42,38,52,36],[42,42,52,36,"useState"],[42,48,52,44],[42,49,52,44,"useState"],[42,57,52,44],[42,59,52,45],[42,63,52,49],[42,64,52,50],[43,4,54,2],[43,8,54,2,"useEffect"],[43,14,54,11],[43,15,54,11,"useEffect"],[43,24,54,11],[43,26,54,12],[43,32,54,18],[44,6,55,4,"loadStoredData"],[44,20,55,18],[44,21,55,19],[44,22,55,20],[45,4,56,2],[45,5,56,3],[45,7,56,5],[45,9,56,7],[45,10,56,8],[46,4,58,2],[46,10,58,8,"loadStoredData"],[46,24,58,22],[46,27,58,25],[46,33,58,25,"loadStoredData"],[46,34,58,25],[46,39,58,37],[47,6,59,4],[47,10,59,8],[48,8,60,6],[48,14,60,12],[48,15,60,13,"userData"],[48,23,60,21],[48,25,60,23,"adminData"],[48,34,60,32],[48,35,60,33],[48,38,60,36],[48,44,60,42,"Promise"],[48,51,60,49],[48,52,60,50,"all"],[48,55,60,53],[48,56,60,54],[48,57,61,8,"AsyncStorage"],[48,69,61,20],[48,70,61,20,"default"],[48,77,61,20],[48,78,61,21,"getItem"],[48,85,61,28],[48,86,61,29],[48,92,61,35],[48,93,61,36],[48,95,62,8,"AsyncStorage"],[48,107,62,20],[48,108,62,20,"default"],[48,115,62,20],[48,116,62,21,"getItem"],[48,123,62,28],[48,124,62,29],[48,131,62,36],[48,132,62,37],[48,133,63,7],[48,134,63,8],[49,8,65,6],[49,12,65,10,"userData"],[49,20,65,18],[49,22,65,20],[50,10,66,8,"setUser"],[50,17,66,15],[50,18,66,16,"JSON"],[50,22,66,20],[50,23,66,21,"parse"],[50,28,66,26],[50,29,66,27,"userData"],[50,37,66,35],[50,38,66,36],[50,39,66,37],[51,8,67,6],[52,8,68,6],[52,12,68,10,"adminData"],[52,21,68,19],[52,23,68,21],[53,10,69,8,"setAdmin"],[53,18,69,16],[53,19,69,17,"JSON"],[53,23,69,21],[53,24,69,22,"parse"],[53,29,69,27],[53,30,69,28,"adminData"],[53,39,69,37],[53,40,69,38],[53,41,69,39],[54,8,70,6],[55,6,71,4],[55,7,71,5],[55,8,71,6],[55,15,71,13,"error"],[55,20,71,18],[55,22,71,20],[56,8,72,6,"console"],[56,15,72,13],[56,16,72,14,"error"],[56,21,72,19],[56,22,72,20],[56,50,72,48],[56,52,72,50,"error"],[56,57,72,55],[56,58,72,56],[57,6,73,4],[57,7,73,5],[57,16,73,14],[58,8,74,6,"setIsLoading"],[58,20,74,18],[58,21,74,19],[58,26,74,24],[58,27,74,25],[59,6,75,4],[60,4,76,2],[60,5,76,3],[61,4,78,2],[61,10,78,8,"login"],[61,15,78,13],[61,18,78,16],[61,24,78,23,"userData"],[61,32,78,37],[61,36,78,42],[62,6,79,4,"setUser"],[62,13,79,11],[62,14,79,12,"userData"],[62,22,79,20],[62,23,79,21],[63,6,80,4],[63,12,80,10,"AsyncStorage"],[63,24,80,22],[63,25,80,22,"default"],[63,32,80,22],[63,33,80,23,"setItem"],[63,40,80,30],[63,41,80,31],[63,47,80,37],[63,49,80,39,"JSON"],[63,53,80,43],[63,54,80,44,"stringify"],[63,63,80,53],[63,64,80,54,"userData"],[63,72,80,62],[63,73,80,63],[63,74,80,64],[64,4,81,2],[64,5,81,3],[65,4,83,2],[65,10,83,8,"logout"],[65,16,83,14],[65,19,83,17],[65,25,83,17,"logout"],[65,26,83,17],[65,31,83,29],[66,6,84,4,"setUser"],[66,13,84,11],[66,14,84,12],[66,18,84,16],[66,19,84,17],[67,6,85,4],[67,12,85,10,"AsyncStorage"],[67,24,85,22],[67,25,85,22,"default"],[67,32,85,22],[67,33,85,23,"removeItem"],[67,43,85,33],[67,44,85,34],[67,50,85,40],[67,51,85,41],[68,6,86,4,"clearWebStorage"],[68,21,86,19],[68,22,86,20],[68,28,86,26],[68,29,86,27],[69,4,87,2],[69,5,87,3],[70,4,89,2],[70,10,89,8,"updateUser"],[70,20,89,18],[70,23,89,21],[70,29,89,28,"userData"],[70,37,89,51],[70,41,89,56],[71,6,90,4],[71,10,90,8,"user"],[71,14,90,12],[71,16,90,14],[72,8,91,6],[72,14,91,12,"updatedUser"],[72,25,91,23],[72,28,91,23,"Object"],[72,34,91,23],[72,35,91,23,"assign"],[72,41,91,23],[72,46,91,31,"user"],[72,50,91,35],[72,52,91,40,"userData"],[72,60,91,48],[72,61,91,50],[73,8,92,6,"setUser"],[73,15,92,13],[73,16,92,14,"updatedUser"],[73,27,92,25],[73,28,92,26],[74,8,93,6],[74,14,93,12,"AsyncStorage"],[74,26,93,24],[74,27,93,24,"default"],[74,34,93,24],[74,35,93,25,"setItem"],[74,42,93,32],[74,43,93,33],[74,49,93,39],[74,51,93,41,"JSON"],[74,55,93,45],[74,56,93,46,"stringify"],[74,65,93,55],[74,66,93,56,"updatedUser"],[74,77,93,67],[74,78,93,68],[74,79,93,69],[75,6,94,4],[76,4,95,2],[76,5,95,3],[77,4,97,2],[77,10,97,8,"adminLogin"],[77,20,97,18],[77,23,97,21],[77,29,97,28,"adminData"],[77,38,97,44],[77,42,97,49],[78,6,98,4,"setAdmin"],[78,14,98,12],[78,15,98,13,"adminData"],[78,24,98,22],[78,25,98,23],[79,6,99,4],[79,12,99,10,"AsyncStorage"],[79,24,99,22],[79,25,99,22,"default"],[79,32,99,22],[79,33,99,23,"setItem"],[79,40,99,30],[79,41,99,31],[79,48,99,38],[79,50,99,40,"JSON"],[79,54,99,44],[79,55,99,45,"stringify"],[79,64,99,54],[79,65,99,55,"adminData"],[79,74,99,64],[79,75,99,65],[79,76,99,66],[80,4,100,2],[80,5,100,3],[81,4,102,2],[81,10,102,8,"adminLogout"],[81,21,102,19],[81,24,102,22],[81,30,102,22,"adminLogout"],[81,31,102,22],[81,36,102,34],[82,6,103,4,"console"],[82,13,103,11],[82,14,103,12,"log"],[82,17,103,15],[82,18,103,16],[82,39,103,37],[82,40,103,38],[83,6,104,4,"setAdmin"],[83,14,104,12],[83,15,104,13],[83,19,104,17],[83,20,104,18],[84,6,105,4],[84,12,105,10,"AsyncStorage"],[84,24,105,22],[84,25,105,22,"default"],[84,32,105,22],[84,33,105,23,"removeItem"],[84,43,105,33],[84,44,105,34],[84,51,105,41],[84,52,105,42],[85,6,106,4,"clearWebStorage"],[85,21,106,19],[85,22,106,20],[85,29,106,27],[85,30,106,28],[86,6,107,4],[87,6,108,4],[87,10,108,8,"Platform"],[87,18,108,16],[87,19,108,16,"default"],[87,26,108,16],[87,27,108,17,"OS"],[87,29,108,19],[87,34,108,24],[87,39,108,29],[87,43,108,33],[87,50,108,40,"window"],[87,56,108,46],[87,61,108,51],[87,72,108,62],[87,74,108,64],[88,8,109,6,"Object"],[88,14,109,12],[88,15,109,13,"keys"],[88,19,109,17],[88,20,109,18,"localStorage"],[88,32,109,30],[88,33,109,31],[88,34,109,32,"forEach"],[88,41,109,39],[88,42,109,40,"key"],[88,45,109,43],[88,49,109,47],[89,10,110,8],[89,14,110,12,"key"],[89,17,110,15],[89,18,110,16,"includes"],[89,26,110,24],[89,27,110,25],[89,34,110,32],[89,35,110,33],[89,37,110,35],[90,12,111,10,"localStorage"],[90,24,111,22],[90,25,111,23,"removeItem"],[90,35,111,33],[90,36,111,34,"key"],[90,39,111,37],[90,40,111,38],[91,10,112,8],[92,8,113,6],[92,9,113,7],[92,10,113,8],[93,6,114,4],[94,6,115,4,"console"],[94,13,115,11],[94,14,115,12,"log"],[94,17,115,15],[94,18,115,16],[94,41,115,39],[94,42,115,40],[95,4,116,2],[95,5,116,3],[96,4,118,2],[96,10,118,8,"isAdmin"],[96,17,118,15],[96,20,118,18,"admin"],[96,25,118,23],[96,30,118,28],[96,34,118,32],[96,38,118,36,"admin"],[96,43,118,41],[96,44,118,42,"access_token"],[96,56,118,54],[96,61,118,59,"undefined"],[96,70,118,68],[97,4,120,2],[97,24,121,4],[97,28,121,4,"_reactJsxDevRuntime"],[97,47,121,4],[97,48,121,4,"jsxDEV"],[97,54,121,4],[97,56,121,5,"AuthContext"],[97,67,121,16],[97,68,121,17,"Provider"],[97,76,121,25],[98,6,121,26,"value"],[98,11,121,31],[98,13,121,33],[99,8,122,6,"user"],[99,12,122,10],[100,8,123,6,"admin"],[100,13,123,11],[101,8,124,6,"isLoading"],[101,17,124,15],[102,8,125,6,"login"],[102,13,125,11],[103,8,126,6,"logout"],[103,14,126,12],[104,8,127,6,"updateUser"],[104,18,127,16],[105,8,128,6,"adminLogin"],[105,18,128,16],[106,8,129,6,"adminLogout"],[106,19,129,17],[107,8,130,6,"isAdmin"],[108,6,131,4],[108,7,131,6],[109,6,131,6,"children"],[109,14,131,6],[109,16,132,7,"children"],[110,4,132,15],[111,6,132,15,"fileName"],[111,14,132,15],[111,16,132,15,"_jsxFileName"],[111,28,132,15],[112,6,132,15,"lineNumber"],[112,16,132,15],[113,6,132,15,"columnNumber"],[113,18,132,15],[114,4,132,15],[114,11,133,26],[114,12,133,27],[115,2,135,0],[116,2,135,1,"_s"],[116,4,135,1],[116,5,49,16,"AuthProvider"],[116,17,49,28],[117,2,49,28,"_c"],[117,4,49,28],[117,7,49,16,"AuthProvider"],[117,19,49,28],[118,2,137,7],[118,11,137,16,"useAuth"],[118,18,137,23,"useAuth"],[118,19,137,23],[118,21,137,26],[119,4,137,26,"_s2"],[119,7,137,26],[120,4,138,2],[120,10,138,8,"context"],[120,17,138,15],[120,20,138,18],[120,24,138,18,"useContext"],[120,30,138,28],[120,31,138,28,"useContext"],[120,41,138,28],[120,43,138,29,"AuthContext"],[120,54,138,40],[120,55,138,41],[121,4,139,2],[121,8,139,6,"context"],[121,15,139,13],[121,20,139,18,"undefined"],[121,29,139,27],[121,31,139,29],[122,6,140,4],[122,12,140,10],[122,16,140,14,"Error"],[122,21,140,19],[122,22,140,20],[122,67,140,65],[122,68,140,66],[123,4,141,2],[124,4,142,2],[124,11,142,9,"context"],[124,18,142,16],[125,2,143,0],[126,2,143,1,"_s2"],[126,5,143,1],[126,6,137,16,"useAuth"],[126,13,137,23],[127,2,137,23],[127,6,137,23,"_c"],[127,8,137,23],[128,2,137,23,"$RefreshReg$"],[128,14,137,23],[128,15,137,23,"_c"],[128,17,137,23],[129,0,137,23],[129,3]],"functionMap":{"names":["<global>","clearWebStorage","AuthProvider","useEffect$argument_0","loadStoredData","login","logout","updateUser","adminLogin","adminLogout","Object.keys.forEach$argument_0","useAuth"],"mappings":"AAA;wBCqC;CDS;OEE;YCK;GDE;yBEE;GFkB;gBGE;GHG;iBIE;GJI;qBKE;GLM;qBME;GNG;sBOE;wCCO;ODI;GPG;CFmB;OWE;CXM"},"hasCjsExports":false},"type":"js/module"}]}